<div class="flex flex-col items-center w-full max-w-md mx-auto space-y-4 p-4">
  <!-- Main Ticket List Card -->
  <div class="bg-white rounded-xl shadow-lg text-center w-full p-4">
    <h2 class="text-xl font-bold mb-4">TICKET LIST</h2>

    <!-- falseWindow: shows Ticket Form -->
    @if (showInput) {
      <form class="mt-4 p-2 bg-gray-50 rounded-lg">
        <textarea [(ngModel)]="newTicketTitle"
                  name="ticketTitle"
                  placeholder="Enter your ticket"
                  class="border p-2 rounded w-full h-24 mb-2">
        </textarea>

        <button type="button"
                (click)="submitNewTicket()"
                class="px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">
          Confirm
        </button>
      </form>
    }

    <!-- create ticket Buttons -->
    <ul class="flex flex-row gap-5 justify-center mt-6 pt-4 border-t">
      <li class="flex items-center justify-center gap-2 cursor-pointer hover:opacity-80"
          (click)="createTicket()">
        <span class="text-blue-600">‚ûï</span> Create
      </li>
    </ul>
</div>

  <!-- Individual Ticket Cards -->
  @for (ticket of filteredTickets; track ticket.id) {
    <div class="bg-white text-black p-4 rounded-xl shadow-lg w-full text-center">
      <div class = text-xl>
        {{ ticket.title }}
      </div>

      <!-- falseWindow: Move Ticket Options -->
      @if (moveInput && selectedTicketId === ticket.id) {
        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
          <h3 class="text-lg font-semibold mb-2">Moving to...</h3>
          <select [(ngModel)]="ticketStatus"
                  name="ticketStatus"
                  class="border p-2 rounded w-full mb-2">
            <option value="">Select status</option>
            <option value="todo">Todo</option>
            <option value="in-progress">In Progress</option>
          </select>
          <button (click)="confirmMoveTicket()"
                  class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Confirm
          </button>
        </div>
      }

      @if (showAssign ){
        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
            <h3 class="text-lg font-semibold mb-2 bg-green-300 rounded">Assigning to...</h3>
            <select [(ngModel)]="ticketStatus"
                    name="ticketStatus"
                    class="border p-2 rounded w-full mb-2">
              <option value="">Choose to assign</option>
                <option value="id">{{ ticket.id }} - {{ ticket.title }}</option>
                <option value="id">Done</option>
            </select>
            <button (click)="confirmAssign()"
                  class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Assign
          </button>
        </div>
      }

   
    

      <!-- falseWindow: Buttons after creation-->
      <ul class="flex flex-row gap-5 justify-center mt-6 pt-4 border-t">
        <li class="flex items-center justify-center gap-2 cursor-pointer hover:opacity-80"
            (click)="moveTicket(ticket.id)">
          <span class="text-orange-600">‚û°Ô∏è</span> Move
        </li>

        <!--
        <li class="flex items-center justify-center gap-2 cursor-pointer hover:opacity-80">
          <span class="text-green-600">üìã</span> List
        </li>
        -->
        
        <li class="flex items-center justify-center gap-2 cursor-pointer hover:opacity-80"
            (click)="createAssign()">
          <span class="text-green-600">üë§</span> Assign
        </li>
      </ul>
    </div>
  }
</div>
